<html>
<head>
<meta charset="utf-8">
</head>
<body>
<script src="param.js"></script>
<!--Main--><script>

//*/
// Calculate random numbers.
console.log("Time: " + picoTime());
console.log("Date: " + picoDate());
console.log("Seed: " + picoSeed());
console.log("Random: " + picoRandom(100));
console.log("NewSeed: " + picoSeed());
for (let i = 0; i < 100; i++) {
	console.log("Random" + i + ": " + picoRandom(1000000, i));
}
//*/

//*/
// Test numbers param.
const numbers = [255,255,255,
		255,219,171, 159,255,243, 191,191,191,
		231,0,91,    0,115,239,   0,147,59,
		167,0,0,     143,0,119,   0,63,23];
picoSetNumbers(numbers);
console.log("Param: " + picoParam());
console.log("Numbers: " + picoNumbers());
//*/

//*/
// Test code param.
{
	const code = [255,255,255, 223,223,223, 191,191,191, 127,127,127, 63,63,63, 0,0,0];
	picoSetParam(picoCodeText(code));
	console.log("Param: " + picoParam());
	console.log("Code: " + picoTextCode(picoParam()));
}
//*/

//*/
// Test 8bit compatible 6bit code param.
{
	const code = [255,255,255, 223,223,223, 191,191,191, 127,127,127, 63,63,63, 0,0,0];
	picoSetParam(picoCodeText(code, 6));
	console.log("Param: " + picoParam());
	console.log("Code: " + picoTextCode(picoParam()));
	console.log("Code6/8: " + picoTextCode(picoParam(), 6));
}
//*/

//*/
// Test 8bit code.
{
	let code1 = [];
	for (let i = 0; i <= 255; i++) {
		code1[i] = i;
	}
	let text = picoCodeText(code1, 8);
	let code2 = picoTextCode(text);
	for (let i = 0; i < code2.length; i++) {
		console.log("" +
			code1[i] + ":" + ("00000000"+code1[i].toString(2)).slice(-8)
			+ " -> " + text[i] + " -> " + 
			code2[i] + ":" + ("00000000"+code2[i].toString(2)).slice(-8));
	}
}
//*/

//*/
// Test 8bit compatible 6bit code.
{
	let code1 = [
	255,255,255, 171,231,255, 199,215,255, 215,203,255,
	255,199,255, 255,199,219, 255,191,179, 255,219,171,
	255,231,163, 227,255,163, 171,243,191, 179,255,207,
	159,255,243, 188,188,188,   0,  0,  0,   0,  0,  0,
	255,255,255,  63,191,255,  95,115,255, 167,139,253,
	247,123,255, 255,119,183, 255,119, 99, 255,155, 59,
	243,191, 63, 131,211, 19,  79,223, 75,  88,248,152,
	  0,235,219, 117,117,117,   0,  0,  0,   0,  0,  0,
	188,188,188,   0,115,239,  35, 59,239, 131,  0,243,
	191,  0,191, 231,  0, 91, 219, 43,  0, 203, 79, 15,
	139,115,  0,   0,151,  0,   0,171,  0,   0,147, 59,
	  0,131,139,   0,  0,  0,   0,  0,  0,   0,  0,  0,
	117,117,117,  39, 27,143,   0,  0,171,  71,  0,159,
	143,  0,119, 171,  0, 19, 167,  0,  0, 127, 11,  0,
	 67, 47,  0,   0, 71,  0,   0, 81,  0,   0, 63, 23,
	 27, 63, 95,   0,  0,  0,   0,  0,  0,   0,  0,  0,
	];
	let text = picoCodeText(code1, 6, 8);
	let code2 = picoTextCode(text);
	for (let i = 0; i < code2.length; i++) {
		console.log("" +
			("000"+code1[i]).slice(-3) + ":" + ("00000000"+code1[i].toString(2)).slice(-8)
			+ " -> " + text[i] + " -> " + 
			("000"+code2[i]).slice(-3) + ":" + ("00000000"+code2[i].toString(2)).slice(-8));
	}
}
//*/

document.addEventListener("click", async (evt) => {

//*/
// Test parse param.
if (!picoParam()) {
	picoSetParam(picoCodeText(numbers));
}
console.log("Param: " + picoParam());
console.log("Numbers: " + picoNumbers());
console.log("6bit code: " + picoTextCode(picoParam()));
console.log("8bit compatible 6bit code: " + picoTextCode(picoParam(), 6, 8));

// Test share param.
// color5 = [255,255,255, 159,255,247, 255,223,175, 191,191,191, 0,119,239, 231,0,95, 0,151,63, 143,0,119, 167,0,0, 0,63,23];
// -> compressed to "1111BH71N333p0C0O90TAr00f0i04o"
// color0 = [255,255,255, 223,223,223, 191,191,191, 127,127,127, 63,63,63, 0,0,0];
// -> compressed to "111555333222444000"
picoShare();
//*/

// Test share file.
picoReset();
let file = picoTextFile("12345667890");
await picoShare(null, [file]);

});</script><!--/Main-->
</body>
</html>
