<html style="overflow:hidden; user-select:none;">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1">
<title>*</title>
<link rel="icon" type="image/svg" href="icon.svg">
<link rel="apple-touch-icon" href="icon.png" sizes="192x192">
<link rel="manifest" href="manifest.json">
<style>
body {
	font-family: Courier, monospace, sans-serif;
	background-color: #fff;
}
a {
	color: #ccc;
	text-decoration: none;
}
#container {
	width: 100%; height: 100%;
	display: flex; display: -webkit-flex;
	flex-direction: column; -webkit-flex-direction: column;
	justify-content: flex-start; -webkit-justify-content: flex-start;
	align-items: center; -webkit-align-items: center;
}
#header {
	width: 95%; margin: 0px;
	flex: 0 1 auto;
	display: flex; display: -webkit-flex;
	flex-direction: row; -webkit-flex-direction: row;
	justify-content: space-between; -webkit-justify-content: space-between;
	align-items: center; -webkit-align-items: center;
}
#contents {
	position: relative;
	width: 95%; height: 90%;
	flex: 1 1 auto;
	background-color: #eee;
}
#footer {
	width: 95%; margin: 0px;
	flex: 0 1 auto;
	display: flex; display: -webkit-flex;
	flex-direction: row; -webkit-flex-direction: row;
	justify-content: flex-end; -webkit-justify-content: flex-end;
	align-items: center; -webkit-align-items: center;
	font-size: 12px;
	color: #eee;
}
.logo {
	width: 160px; height: 60px; margin: 0px 16px;
	display: flex; display: -webkit-flex;
	flex-direction: row; -webkit-flex-direction: row;
	justify-content: flex-start; -webkit-justify-content: flex-start;
	align-items: center; -webkit-align-items: center;
}
.logo #icon {
	width: 40px; height: 40px; padding: 10px; margin-left: -28px;
}
.logo #title {
	font-size: 24px;
	color: #eee;
}
.menu {
	height: 40px;
	display: flex; display: -webkit-flex;
	flex-direction: row; -webkit-flex-direction: row;
	justify-content: space-between; -webkit-justify-content: space-between;
	align-items: flex-end; -webkit-align-items: flex-end;
}
.menu .item {
	width: 40px; height: 40px; margin: 0px;
	display: flex; display: -webkit-flex;
	flex-direction: column; -webkit-flex-direction: column;
	justify-content: center; -webkit-justify-content: center;
	align-items: center; -webkit-align-items: center;
	font-size: 16px;
}
.menu .subitem {
	width: 40px; height: 20px; margin-left: -40px;
	display: flex; display: -webkit-flex;
	flex-direction: column; -webkit-flex-direction: column;
	justify-content: center; -webkit-justify-content: center;
	align-items: center; -webkit-align-items: center;
	font-size: 10px;
}
.menu .item.dark {
	background-color: #eee;
	color: #fff;
}
.menu .subitem.dark {
	background-color: none;
	color: #ccc;
}
.menu .light {;
	background-color: #ccc;
	color: #fff;
}
.menu .subitem.light {
	background-color: none;
	color: #fff;
}
.menu a {
	transform: scale(1);
	opacity: 1;
}
.menu a:hover {
	transform: scale(1);
	opacity: 0.6;
}
.menu a:active {
	transform: scale(0.9);
	opacity: 1;
}
@media (orientation: landscape) {
	#contents {
		display: flex; display: -webkit-flex;
		flex-direction: row; -webkit-flex-direction: row;
		justify-content: center; -webkit-justify-content: center;
		align-items: center; -webkit-align-items: center;
	}
	#screen {
		height: 100%; aspect-ratio: 1;
	}
}
@media (orientation: portrait) {
	#contents {
		display: flex; display: -webkit-flex;
		flex-direction: column; -webkit-flex-direction: column;
		justify-content: center; -webkit-justify-content: center;
		align-items: center; -webkit-align-items: center;
	}
	#screen {
		width: 100%; aspect-ratio: 1;
	}
}
</style>
</head>
<body>
<div id="container">
	<h1 id="header">
		<div class="logo">
			<a id="title" href="?">*</a>
		</div>
		<div class="menu">
			<a class="item dark" id="icon" href="javascript:;"></a>
		</div>
	</h1>
	<div id="contents">
		<div id="screen" class="picoImage picoTouch"></div>
	</div>
	<h6 id="footer">
		<div id="author"></div>/
		<div id="version"></div>
	</h6>
</div>
<script>console.log = () => {};</script>
<script src="daemon.js"></script>
<script src="image.js"></script>
<script src="sound.js"></script>
<script src="touch.js"></script>
<!--Main--><script>

//let icon = new pico.Image("icon");
//icon.drawChar(":)");

let colors = [
	0,63,23, 167,0,0, 143,0,119,
	0,147,59, 231,0,91, 0,115,239,
	188,188,188, 255,219,171, 159,255,243,
	255,255,255, 221,221,221];
let select = 9;
const width = 16, height = 16, grid = 10;
let pixels = [];
for (let j = 0; j < height; j++) {
	pixels[j] = [];
	for (let i = 0; i < width; i++) {
		pixels[j][i] = select;
	}
}

(async () => {

	picoColor(colors);
	let textarea = "";

	for (;;) {
		picoClear();
		picoPixel(-1, -100,-100,200,200);

		for (let j = 0; j < height; j++) {
			let y = (j - height / 2) * grid + 0;
			for (let i = 0; i < width; i++) {
				let x = (i - width / 2) * grid + 8;
				if (picoMotion(x, y, grid/2)) {
					if (pixels[j][i] != select) {
						pixels[j][i] = select;
						picoBeep(1.2, 0.1);
					}
					picoPixel(pixels[j][i], x, y, 1, 1);
				} else {
					picoPixel(pixels[j][i], x, y, 0.5, 0.5);
				}
			}
		}

		for (let i = 0; i < colors.length/3 - 1; i++) {
			let x = (i - colors.length/3 / 2) * 16 + 18;
			let y = 88;
			if (picoMotion(x, y, 8, 12)) {
				if (select != i) {
					select = i;
					picoBeep(0, 0.1);
				}
			}
			if (i == select) {
				picoChar("+", i, x, y, 0, 1);
			} else {
				picoChar("-", i, x, y, 0, 1);
			}
		}

		picoText(textarea, [-22,-16,44,16], 2);

		await picoFlip();
		await picoRead();
	}

})();
</script><!--/Main-->
</body>
</html>
