const title = "InyoDice"; // Title.

const labels = {
	0:"　　　　　　インヨーダイス　　　　　　",
	1:"　　　　　　インヨーダイス　　　　　　",
	2:"　　　　　　インヨーダイス　　　　　　",
	3:"　　　　　　インヨーダイス　　　　　　",
	4:"　　　　　　インヨーダイス　　　　　　",
	5:"　　　　　　インヨーダイス　　　　　　",
	6:"　　　　　　インヨーダイス　　　　　　",
};
const figures = {
	0:"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　　◎　　　　　　　　　◉　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n",
	1:"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　あいて　　　　　　　じぶん　　　\n"+
		"　　　　　　○？　　　○３　　　　　　\n"+
		"　　　　◎　●？　　　●４　◉　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　＄２０　　　　　　　＄２０　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n",
	2:"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　　　　　　　　　　　「●６」　　\n"+
		"　　　　　　　　　　　　　　▽　　　　\n"+
		"　　　　　　○？　　　○３　　　　　　\n"+
		"　　　　◎　●２？　　●４　◉　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　＄２０　　　　　　　＄２０　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n",
	3:"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　「○８」　　＞　　　　●６　　　\n"+
		"　　　　▽　　　　　　　　　　　　　　\n"+
		"　　　　　　○？　　　○３　　　　　　\n"+
		"　　　　◎　●？　　　●４　◉　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　＄２０　　　　　　　＄２０　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n",
	4:"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　　○８＞　　　　　　「ショウブ」\n"+
		"　　　　＊　　　　　　　　　▽　　　　\n"+
		"　　　　　　○４　＋　○３　　　　　　\n"+
		"　　　　◎　●−　　　●−　◉　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　＄２０　　−８→　　＄２０　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n",
	5:"　　　　　　　　　　　　「フリナオシ」\n"+
		"　　　　○８　　　　＋１＜「●１０」　\n"+
		"　　　　　　　　　　　　　　▽　　　　\n"+
		"　　　　　　○？　○３→１　　　　　　\n"+
		"　　　　◎　●？　●４→６　◉　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　＄１２　　　　　　　＄２８　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n",
	6:"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　　＊　　　　　　　　　　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　　◎　　　　　　　　　◉　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　＄０まけ　　　　　　＄４０　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n",
};
const texts = {
	0:"　　　　　　　２−６にん　　　　　　　\n"+
		"　　　　　　　　１２ふん　　　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"「インヨーダイス」は、ダイスのゴウケイをよそうして、"+
		"ウンとスイリとハッタリでチップをとりあうダイスゲームだ。\n"+
		"　　　　　　　　　　　　　　　　　　％\n",
	1:"　　　　　あそびかた　１／６　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"ぜんいんでダイスをふり、じぶんのダイスをみせずにかくす。\n"+
		"　　　　　　　　　　　　　　　　　　％\n",
	2:"　　　　　あそびかた　２／６　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"じゅんばんに、ぜんいんのダイスの○または●のゴウケイをよそうして、"+
		"○や●のいろと、それをこえないかずを「センゲン」する。\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"たとえば、じぶんのダイスが●４で、あいてのダイスが●２とよそうしたとき、●６とセンゲンする。\n"+
		"　　　　　　　　　　　　　　　　　　％\n",
	3:"　　　　　あそびかた　３／６　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"つぎのひとがセンゲンするときは、まえのひとより、おおきいかずをセンゲンしなくてはならない。\n"+
		"そのとき、○や●のいろをかえてもよい。\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"たとえば、●６のつぎに、●７や○８をセンゲンできるが、○６はできない。\n"+
		"　　　　　　　　　　　　　　　　　　％\n",
	4:"　　　　　あそびかた　４／６　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"まえのひとのセンゲンが、おおきすぎるとおもえば「ショウブ」で、"+
		"ぜんいんのダイスをみて、ゴウケイをかくにんする。\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"ショウブにまけたひとは、かったひとに、そのときセンゲンしたかずぶんのチップをしはらう。\n"+
		"　　　　　　　　　　　　　　　　　　％\n",
	5:"　　　　　あそびかた　５／６　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"「フリナオシ」で、ダイスをもう１どふってから、センゲンすることもできる。\n"+
		"ただし、フリナオシのかずぶんを、おおきくセンゲンしなくてはならない。\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"たとえば、●８のつぎにフリナオシ１かいしたら、●１０をセンゲンできるが、●９はできない。\n"+
		"　　　　　　　　　　　　　　　　　　％\n",
	6:"　　　　　あそびかた　６／６　　　　　\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"ショウブのあとは、ぜんいんでダイスをふるところからやりなおす。\n"+
		"　　　　　　　　　　　　　　　　　　　\n"+
		"チップをすべてなくしたひとはまけ。\n"+
		"　　　　　　　　　　　　　　　　　　％\n",
};　
var state = 0; // Playing state.
var playing = 0; // Playing count.

// Load.
async function appLoad() {
	picoTitle(title);
	const extraCharAiliases = { // Extra char ailias table.
		"0０": null,
		"1１": null,
		"2２": null,
		"3３": null,
		"4４": null,
		"5５": null,
		"6６": null,
		"7７": null,
		"8８": null,
		"9９": null,
		"-−": null,
		"+＋": null,
		"/／": null,
		"%％": null,
		":：": null,
		"#・": null,
		"?？": null,
		"$＄": null,
	};
	for (let key in extraCharAiliases) {
		picoCharSprite(key, extraCharAiliases[key]);
	}
	const extraCharSprites = { // Extra char sprite table.
		"ァ": picoCode6("077912922932942923943924934925"),
		"ア": picoCode6("077911921931941951932952933943934925"),
		"ィ": picoCode6("077933943914924934935"),
		"イ": picoCode6("077941951922932913933934935"),
		"ゥ": picoCode6("077932913923933943914944935"),
		"ウ": picoCode6("077931912922932942952913953944935"),
		"ェ": picoCode6("077913923933943934915925935945"),
		"エ": picoCode6("077912922932942952933934915925935945955"),
		"ォ": picoCode6("077932913923933943924934915935"),
		"オ": picoCode6("077941912922932942952933943924944915945"),
		"カ": picoCode6("077921912922932942952923953924954915945955"),
		"ガ": picoCode6("099951971932952972923933943953963934964935965926956966"),
		"キ": picoCode6("077931912922932942952933914924934944954935"),
		"ギ": picoCode6("099951971942952972923933943953963944925935945955965946"),
		"ク": picoCode6("077921931941951922952913953944925935"),
		"グ": picoCode6("099951971932942952972933963924964955936946"),
		"ケ": picoCode6("077921922932942952913943944925935"),
		"ゲ": picoCode6("099951971932952972933943953963924954955936946"),
		"コ": picoCode6("077911921931941951952953954915925935945955"),
		"ゴ": picoCode6("099951971922932942952972963964965926936946956966"),
		"サ": picoCode6("077921941912922932942952923943944935"),
		"ザ": picoCode6("099951971932952972923933943953963934954955946"),
		"シ": picoCode6("077911921952913923953944925935"),
		"ジ": picoCode6("099951971922932952972963924934964955936946"),
		"ス": picoCode6("077911921931941951952943934944915925955"),
		"ズ": picoCode6("099951971922932942952972963954945955926936966"),
		"セ": picoCode6("077921912922932942952923953924935945955"),
		"ゼ": picoCode6("099951971932952972923933943953963934964935946956966"),
		"ソ": picoCode6("077911951912952923943944935"),
		"ゾ": picoCode6("099951971922952972923963934954955946"),
		"タ": picoCode6("077921931941951922952913933953944925935"),
		"ダ": picoCode6("099951971932942952972933963924944964955936946"),
		"チ": picoCode6("077921931941932913923933943953934925"),
		"ヂ": picoCode6("099951971932942952972943924934944954964945936"),
		"ッ": picoCode6("077913933953954935945"),
		"ツ": picoCode6("077911931951912932952953944925935"),
		"ヅ": picoCode6("099951971922942952972923943963964955936946"),
		"テ": picoCode6("077921931941913923933943953934925"),
		"デ": picoCode6("099951971932942952972924934944954964945936"),
		"ト": picoCode6("077921922923933943924954925"),
		"ド": picoCode6("099951971932952972933934944954935965936"),
		"ナ": picoCode6("077931912922932942952933934925"),
		"ニ": picoCode6("077922932942915925935945955"),
		"ヌ": picoCode6("077911921931941951952923943934944915925955"),
		"ネ": picoCode6("077931912922932942952943924934944915935955"),
		"ノ": picoCode6("077951952943934915925"),
		"ハ": picoCode6("077931942923953914954915955"),
		"バ": picoCode6("099951971942952972953934964925965926966"),
		"パ": picoCode6("099951961971942952972953963973934964925965926966"),
		"ヒ": picoCode6("077911912922932942952913914925935945955"),
		"ビ": picoCode6("099951971922952972923933943953963924925936946956966"),
		"ピ": picoCode6("099951961971922952972923933943953963973924925936946956966"),
		"フ": picoCode6("077911921931941951952953944925935"),
		"ブ": picoCode6("099951971922932942952972963964955936946"),
		"プ": picoCode6("099951961971922932942952972953963973964955936946"),
		"ヘ": picoCode6("077922913933944955"),
		"ベ": picoCode6("099951971952972933924944955966"),
		"ペ": picoCode6("099951961971952972933953963973924944955966"),
		"ホ": picoCode6("077931912922932942952933914934954915935955"),
		"ボ": picoCode6("099951971942952972923933943953963944925945965926946966"),
		"ポ": picoCode6("099951961971942952972923933943953963973944925945965926946966"),
		"マ": picoCode6("077911921931941951952923943934945"),
		"ミ": picoCode6("077911921931941923933943925935945955"),
		"ム": picoCode6("077931922923943914944915925935955"),
		"メ": picoCode6("077941922942933943934954915925"),
		"モ": picoCode6("077911921931941922913923933943924935945955"),
		"ャ": picoCode6("077922913923933943924944925"),
		"ヤ": picoCode6("077921912922932942952923953934935"),
		"ュ": picoCode6("077913923933934915925935945"),
		"ユ": picoCode6("077922932942943944915925935945955"),
		"ョ": picoCode6("077912922932942913923933943944915925935945"),
		"ヨ": picoCode6("077911921931941951952913923933943953954915925935945955"),
		"ラ": picoCode6("077921931941913923933943953954925935945"),
		"リ": picoCode6("077911941912942913943944925935"),
		"ル": picoCode6("077921941922942923943924944915945955"),
		"レ": picoCode6("077911912913953914944915925935"),
		"ロ": picoCode6("077911921931941951912952913953914954915925935945955"),
		"ワ": picoCode6("077911921931941951912952953944925935"),
		"ヲ": picoCode6("077911921931941951952913923933943944925935"),
		"ン": picoCode6("077911921951952953944915925935"),

		"ぁ": picoCode6("077912922932942923933914934944915925945"),
		"あ": picoCode6("077911921931941922913923933943914924944954915925935955"),
		"ぃ": picoCode6("077913943914944925"),
		"い": picoCode6("077911912952913953914934954925"),
		"ぅ": picoCode6("077922932913923933943944925935"),
		"う": picoCode6("077921931941922932942913953954935945"),
		"ぇ": picoCode6("077922932913923933943924934915935945"),
		"え": picoCode6("077921931912922932942933924934915945955"),
		"ぉ": picoCode6("077912922942923914924934944915925945"),
		"お": picoCode6("077911921931951922913923933943914934954915925935955"),
		"か": picoCode6("077921941912922932952923943914944915935945"),
		"が": picoCode6("099951971932952972923933943963934954925955926946956"),
		"き": picoCode6("077931922932942933943953914944925935"),
		"ぎ": picoCode6("099951971942952972933943953944954964925955936946"),
		"く": picoCode6("077941922932913924934945"),
		"ぐ": picoCode6("099951971952972933943924935945956"),
		"け": picoCode6("077911941912932942952913943914944935"),
		"げ": picoCode6("099951971922952972923943953963924954925955946"),
		"こ": picoCode6("077921931941942914925935945955"),
		"ご": picoCode6("099951971932942952972953925936946956966"),
		"さ": picoCode6("077931922932942952943914925935"),
		"ざ": picoCode6("099951971942952972933943953963954925936946"),
		"し": picoCode6("077921922923924954935945"),
		"じ": picoCode6("099951971932952972933934935965946956"),
		"す": picoCode6("077941912922932942952923943934944935"),
		"ず": picoCode6("099951971952972923933943953963934954945955946"),
		"せ": picoCode6("077921941912922932942952923943924935945955"),
		"ぜ": picoCode6("099951971932952972923933943953963934954935946956966"),
		"そ": picoCode6("077921941922932913923933943953934945"),
		"ぞ": picoCode6("099951971932952972933943924934944954964945956"),
		"た": picoCode6("077921912922932923943953914915935945955"),
		"だ": picoCode6("099951971932952972923933943934954964925926946956966"),
		"ち": picoCode6("077921912922932942923933943924954945"),
		"ぢ": picoCode6("099951971932952972923933943953934944954935965956"),
		"っ": picoCode6("077913923933944925935"),
		"つ": picoCode6("077912922932942953954935945"),
		"づ": picoCode6("099951971952972923933943953964965946956"),
		"て": picoCode6("077911921931941951942933934945955"),
		"で": picoCode6("099951971922932942952972953944945956966"),
		"と": picoCode6("077911941951922932923914925935945955"),
		"ど": picoCode6("099951971922952972933943934925936946956966"),
		"な": picoCode6("077921912922932952913943914934944954935945"),
		"に": picoCode6("077911931941951912913914934915945955"),
		"ぬ": picoCode6("077921941912922932942913933953914924944954945955"),
		"ね": picoCode6("077921912922932942923953914924944954925945955"),
		"の": picoCode6("077921931941912932952913933953914924954945"),
		"は": picoCode6("077911941912932942952913943914934944954915935945"),
		"ば": picoCode6("099951971922952972923943953963924954925945955965926946956"),
		"ぱ": picoCode6("099951961971922952972923943953963973924954925945955965926946956"),
		"ひ": picoCode6("077911921922913943953914944925935"),
		"び": picoCode6("099951971922932952972933924954964925955936946"),
		"ぴ": picoCode6("099951961971922932952972933953963973924954964925955936946"),
		"ふ": picoCode6("077931941913933914934954925935955"),
		"ぶ": picoCode6("099951971942952972924944925945965936946966"),
		"ぷ": picoCode6("099951961971942952972953963973924944925945965936946966"),
		"へ": picoCode6("077922932913943954"),
		"べ": picoCode6("099951971952972933943924954965"),
		"ぺ": picoCode6("099951961971952972933943953963973924954965"),
		"ほ": picoCode6("077911931941951912932942952913943914934944954915935945"),
		"ぼ": picoCode6("099941951971922952972923943953963924954925945955965926946956"),
		"ぽ": picoCode6("099941951961971922952972923943953963973924954925945955965926946956"),
		"ま": picoCode6("077911921931941951912922932942952933914924934944915925935955"),
		"み": picoCode6("077911921922942913923933943953914924944945"),
		"む": picoCode6("077921941912922932952923914924954915925935945955"),
		"め": picoCode6("077921941912922932942913933953914924934954945"),
		"も": picoCode6("077921912922932923933914924954925935945"),
		"ゃ": picoCode6("077922932913923933943924944925"),
		"や": picoCode6("077911931941922952913923943953924935"),
		"ゅ": picoCode6("077932913923933943914934944935"),
		"ゆ": picoCode6("077921931941912922932952913933953914934944954935"),
		"ょ": picoCode6("077932933943914924934915925945"),
		"よ": picoCode6("077931932942952933914924934944915925935955"),
		"ら": picoCode6("077931941912913923933943914954935945"),
		"り": picoCode6("077911941912942913923943944925935"),
		"る": picoCode6("077921931941922932913943953924934954925935945"),
		"れ": picoCode6("077921912922932942923943914924944925945955"),
		"ろ": picoCode6("077921931941932923933943914954935945"),
		"わ": picoCode6("077921912922932942923953914924954925945"),
		"を": picoCode6("077911921931941922923933943914934925935945"),
		"ん": picoCode6("077911912913923914934954915935945"),

		"ー": picoCode6("077913923933943953"),
		"゛": picoCode6("077911931912932"),
		"゜": picoCode6("077911921931912932913923933"),
		"、": picoCode6("077914925"),
		"。": picoCode6("077913923933914934915925935"),
		"＊": picoCode6("077911951922942933924944915955"),
		"○": picoCode6("077921931941912952913953914954925935945"),
		"●": picoCode6("077921931941912922932942952913923933943953914924934944954925935945"),
		"▽": picoCode6("077911951912952923943924944935"),
		"＜": picoCode6("077941951922932913924934945955"),
		"＞": picoCode6("077911921932942953934944915925"),
		"→": picoCode6("077931942913923933943953944935"),
		"「": picoCode6("077931941951932933"),
		"」": picoCode6("077933934915925935"),
		"◉": picoCode6("099900910920930940950960970980901911921931941951961971981902912932942952972982903913923933943953963973983904914924934944964974984905915935955975985906916926966976986907917927937947957967977987908918928938948958968978988"), //[0,7,7,9,1,0,9,2,0,9,3,0,9,4,0,9,5,0,9,1,1,9,3,1,9,5,1,9,1,2,9,2,2,9,3,2,9,4,2,9,5,2,9,2,4,9,4,4,9,1,5,9,3,5,9,5,5],
		"◎": picoCode6("099900910920930940950960970980901921931941951961981902922942962982903923933943953963983904984905935955985906926946966986907987908918928938948958968978988"), //[0,7,7,9,0,0,9,1,0,9,2,0,9,3,0,9,4,0,9,5,0,9,6,0,9,0,1,9,2,1,9,3,1,9,4,1,9,6,1,9,0,2,9,1,2,9,2,2,9,3,2,9,4,2,9,5,2,9,6,2,9,0,3,9,1,3,9,2,3,9,3,3,9,5,3,9,6,3,9,0,4,9,2,4,9,4,4,9,6,4,9,0,5,9,1,5,9,5,5,9,6,5,9,0,6,9,1,6,9,2,6,9,3,6,9,4,6,9,5,6,9,6,6],
	};
	for (let key in extraCharSprites) {
		picoCharSprite(key, extraCharSprites[key]);
	}
	picoCharLeading(8,8);
}

// Main.
async function appMain() {
	picoClear();
	picoRect(0, 0,40,160,104, 0,1);
	picoText(labels[state], -1, 0,-84,152,24, 0,1)
	picoText(figures[state], -1, 0,-36,152,96, 0,1);
	picoText(texts[state].substr(0,playing), -1, 0,60,152,132, 0,1);

	if (picoAction()) {
		if (playing == texts[state].length) {
			state = state + 1 <= 6 ? state + 1: 0;
			playing = 0;
		} else if (playing > texts[state].length) {
			playing = texts[state].length;
		}
	} else if (playing < texts[state].length) {
		if (picoMotion()) {
			playing = playing + 10 < texts[state].length ? playing + 10 : texts[state].length + 1;
		} else {
			playing += 0.5;
		}
		picoFlush();
	}
}
